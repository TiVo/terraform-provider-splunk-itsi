---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "itsi_kpi_base_search Resource - itsi"
subcategory: ""
description: |-
  
---

# itsi_kpi_base_search (Resource)



## Example Usage

```terraform
resource "itsi_kpi_base_search" "my_kpi_base_search" {
  title                         = "this_is_a_test"
  actions                       = ""
  alert_lag                     = "31"
  alert_period                  = "5"
  base_search                   = "index=_internal source=*metrics.log group=tcpin_connections \n | eval sourceHost=if(isnull(hostname), sourceHost,hostname)"
  description                   = "This is a description for a KPI base search"
  entity_alias_filtering_fields = null
  entity_breakdown_id_fields    = "host"
  entity_id_fields              = "host"
  is_entity_breakdown           = false
  is_service_entity_filter      = false
  metric_qualifier              = ""
  metrics {
    aggregate_statop         = "dc"
    entity_statop            = "avg"
    fill_gaps                = "null_value"
    gap_custom_alert_value   = "0"
    gap_severity             = "unknown"
    gap_severity_color       = "#CCCCCC"
    gap_severity_color_light = "#EEEEEE"
    gap_severity_value       = "-1"
    threshold_field          = "sourceIp"
    title                    = "Forwarder Count"
    unit                     = ""
  }
  search_alert_earliest = "5"
  sec_grp               = "default_itsi_security_group"
  source_itsi_da        = "itsi"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `alert_lag` (String) Contains the number of seconds of lag to apply to the alert search, max is 30 minutes (1799 seconds).
- `alert_period` (String) User specified interval to run the KPI search in minutes.
- `base_search` (String) KPI search defined by user for this KPI. All generated searches for the KPI are based on this search.
- `entity_breakdown_id_fields` (String) KPI search events are split by the alias field defined in entities for the service containing this KPI
- `entity_id_fields` (String) Fields from this KPI's search events that will be mapped to the alias fields defined in entities for the service containing this KPI. This field enables the KPI search to tie the aliases of entities to the fields from the KPI events in identifying entities at search time.
- `is_entity_breakdown` (Boolean) Determines if search breaks down by entities. See KPI definition.
- `is_service_entity_filter` (Boolean) If true a filter is used on the search based on the entities included in the service.
- `search_alert_earliest` (String) Value in minutes. This determines how far back each time window is during KPI search runs.
- `title` (String) Name of this KPI base search.

### Optional

- `actions` (String) Set of strings, delimited by comma. Corresponds custom actions stanzas, defined in alert_actions.conf.
- `description` (String) General description for this KPI base search.
- `entity_alias_filtering_fields` (String) Fields from this KPI's search events that will be mapped to the alias fields defined in entities for the service containing this KPI. This field enables the KPI search to tie the aliases of entities to the fields from the KPI events in identifying entities at search time.
- `metric_qualifier` (String) Used to further split metrics. Hidden in the UI.
- `metrics` (Block Set) (see [below for nested schema](#nestedblock--metrics))
- `sec_grp` (String) The team the object belongs to.
- `source_itsi_da` (String) Source of DA used for this search. See KPI Threshold Templates.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `id` (String) The ID of this resource

<a id="nestedblock--metrics"></a>
### Nested Schema for `metrics`

Required:

- `aggregate_statop` (String) Statistical operation (avg, max, median, stdev, and so on) used to combine data for the aggregate alert_value (used for all KPI).
- `entity_statop` (String) Statistical operation (avg, max, mean, and so on) used to combine data for alert_values on a per entity basis (used if entity_breakdown is true).
- `fill_gaps` (String) How to fill missing data
- `threshold_field` (String) The field on which the statistical operation runs
- `title` (String) Name of this metric
- `unit` (String) User-defined units for the values in threshold field.

Optional:

- `gap_custom_alert_value` (Number) Custom value to fill data gaps.
- `gap_severity` (String) Severity level assigned for data gaps (info, normal, low, medium, high, critical, or unknown).
- `gap_severity_color` (String) Severity color assigned for data gaps.
- `gap_severity_color_light` (String) Severity light color assigned for data gaps.
- `gap_severity_value` (String) Severity value assigned for data gaps.

Read-Only:

- `id` (String) Generated metric _key


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).

## Import

Import is supported using the following syntax:

```shell
terraform import itsi_kpi_base_search.example {{id}}
#OR
terraform import itsi_kpi_base_search.example {{title}}
```
