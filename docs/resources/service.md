---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "itsi_service Resource - itsi"
subcategory: ""
description: |-
  Manages a Service within ITSI.
---

# itsi_service (Resource)

Manages a Service within ITSI.

## Example Usage

```terraform
resource "itsi_service" "Test-custom-static-threshold" {
  enabled = true
  entity_rules {
    rule {
      field      = "host"
      field_type = "alias"
      rule_type  = "matches"
      value      = "example.com"
    }
  }
  kpi {
    base_search_id     = "625f502d7e6e1a37ea062eff"
    base_search_metric = "host_count"
    custom_threshold {
      aggregate_thresholds {
        base_severity_label = "normal"
        gauge_max           = 96.8
        gauge_min           = 0
        is_max_static       = false
        is_min_static       = true
        metric_field        = "count"
        render_boundary_max = 100
        render_boundary_min = 0
        search              = ""
        threshold_levels {
          dynamic_param   = 0
          severity_label  = "medium"
          threshold_value = 75
        }
        threshold_levels {
          dynamic_param   = 0
          severity_label  = "high"
          threshold_value = 88
        }
        threshold_levels {
          dynamic_param   = 0
          severity_label  = "low"
          threshold_value = 50
        }
      }
      entity_thresholds {
        base_severity_label = "normal"
        gauge_max           = 82.5
        gauge_min           = 0
        is_max_static       = false
        is_min_static       = true
        metric_field        = "count"
        render_boundary_max = 100
        render_boundary_min = 0
        search              = ""
        threshold_levels {
          dynamic_param   = 0
          severity_label  = "medium"
          threshold_value = 75
        }
        threshold_levels {
          dynamic_param   = 0
          severity_label  = "low"
          threshold_value = 50
        }
      }
    }
    search_type           = "shared_base"
    threshold_template_id = ""
    title                 = "Test custom static threshold KPI 1"
    type                  = "kpis_primary"
    urgency               = 5
  }
  security_group = "default_itsi_security_group"
  title          = "Test custom static threshold"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `title` (String) Title of the service.

### Optional

- `description` (String) User defined description for the service. Defaults to ``.
- `enabled` (Boolean) Boolean value defining whether the service should be enabled. Defaults to `false`.
- `entity_rules` (Block Set) A set of rule groups that are combined by OR operator. (see [below for nested schema](#nestedblock--entity_rules))
- `is_healthscore_calculate_by_entity_enabled` (Boolean) Set the Service Heath Score calculation to account for the severity levels of individual entities
				               if at least one KPI is split by entity. Defaults to `true`.
- `kpi` (Block Set) A set of KPI descriptions for this service. (see [below for nested schema](#nestedblock--kpi))
- `security_group` (String) The team the object belongs to. Defaults to `default_itsi_security_group`.
- `service_depends_on` (Block Set) A set of service descriptions with KPIs in those services that this service depends on. (see [below for nested schema](#nestedblock--service_depends_on))
- `tags` (Set of String) The tags for the service. Cannot contain the following characters: / \ " ' ! @ ? . , ; $ ^

### Read-Only

- `id` (String) The ID of this resource.
- `shkpi_id` (String) _key value for the Service Health Score KPI.

<a id="nestedblock--entity_rules"></a>
### Nested Schema for `entity_rules`

Optional:

- `rule` (Block Set) A set of rules within the rule group, which are combined using AND operator. (see [below for nested schema](#nestedblock--entity_rules--rule))

<a id="nestedblock--entity_rules--rule"></a>
### Nested Schema for `entity_rules.rule`

Required:

- `field` (String) The field in the entity definition to compare values to evaluate this rule.
- `field_type` (String) Takes values alias, info or title specifying in which category of fields the field attribute is located.
- `rule_type` (String) Takes values not or matches to indicate whether it's an inclusion or exclusion rule.
- `value` (String) Values to evaluate in the rule. To specify multiple values, separate them with a comma. Values are not case sensitive.



<a id="nestedblock--kpi"></a>
### Nested Schema for `kpi`

Required:

- `base_search_id` (String)
- `base_search_metric` (String)
- `title` (String) Name of the kpi. Can be any unique value.

Optional:

- `custom_threshold` (Block Set) (see [below for nested schema](#nestedblock--kpi--custom_threshold))
- `search_type` (String) Defaults to `shared_base`.
- `threshold_template_id` (String)
- `type` (String) Could be service_health or kpis_primary. Defaults to `kpis_primary`.
- `urgency` (Number) User-assigned importance value for this KPI. Defaults to `5`.

Read-Only:

- `id` (String) id (splunk _key) is automatically generated sha1 string, from base_search_id & metric_id seed,
			 concatenated with serviceId.

<a id="nestedblock--kpi--custom_threshold"></a>
### Nested Schema for `kpi.custom_threshold`

Required:

- `aggregate_thresholds` (Block Set, Min: 1) (see [below for nested schema](#nestedblock--kpi--custom_threshold--aggregate_thresholds))
- `entity_thresholds` (Block Set, Min: 1) (see [below for nested schema](#nestedblock--kpi--custom_threshold--entity_thresholds))

<a id="nestedblock--kpi--custom_threshold--aggregate_thresholds"></a>
### Nested Schema for `kpi.custom_threshold.aggregate_thresholds`

Required:

- `render_boundary_max` (Number) Upper bound value to use to render the graph for the thresholds.
- `render_boundary_min` (Number) Lower bound value to use to render the graph for the thresholds.

Optional:

- `base_severity_label` (String) Base severity label assigned for the threshold (info, normal, low, medium, high, critical).  Defaults to `normal`.
- `gauge_max` (Number) Maximum value for the threshold gauge specified by user
- `gauge_min` (Number) Minimum value for the threshold gauge specified by user.
- `is_max_static` (Boolean) True when maximum threshold value is a static value, false otherwise.  Defaults to `false`.
- `is_min_static` (Boolean) True when min threshold value is a static value, false otherwise. Defaults to `false`.
- `metric_field` (String) Thresholding field from the search. Defaults to ``.
- `search` (String) Generated search used to compute the thresholds for this KPI. Defaults to ``.
- `threshold_levels` (Block Set) (see [below for nested schema](#nestedblock--kpi--custom_threshold--aggregate_thresholds--threshold_levels))

<a id="nestedblock--kpi--custom_threshold--aggregate_thresholds--threshold_levels"></a>
### Nested Schema for `kpi.custom_threshold.aggregate_thresholds.threshold_levels`

Required:

- `severity_label` (String) Severity label assigned for this threshold level like info, warning, critical, etc
- `threshold_value` (Number) Value for the threshold field stats identifying this threshold level. 
				This is the key value that defines the levels for values derived from the KPI search metrics.

Optional:

- `dynamic_param` (Number) Value of the dynamic parameter for adaptive thresholds



<a id="nestedblock--kpi--custom_threshold--entity_thresholds"></a>
### Nested Schema for `kpi.custom_threshold.entity_thresholds`

Required:

- `render_boundary_max` (Number) Upper bound value to use to render the graph for the thresholds.
- `render_boundary_min` (Number) Lower bound value to use to render the graph for the thresholds.

Optional:

- `base_severity_label` (String) Base severity label assigned for the threshold (info, normal, low, medium, high, critical).  Defaults to `normal`.
- `gauge_max` (Number) Maximum value for the threshold gauge specified by user
- `gauge_min` (Number) Minimum value for the threshold gauge specified by user.
- `is_max_static` (Boolean) True when maximum threshold value is a static value, false otherwise.  Defaults to `false`.
- `is_min_static` (Boolean) True when min threshold value is a static value, false otherwise. Defaults to `false`.
- `metric_field` (String) Thresholding field from the search. Defaults to ``.
- `search` (String) Generated search used to compute the thresholds for this KPI. Defaults to ``.
- `threshold_levels` (Block Set) (see [below for nested schema](#nestedblock--kpi--custom_threshold--entity_thresholds--threshold_levels))

<a id="nestedblock--kpi--custom_threshold--entity_thresholds--threshold_levels"></a>
### Nested Schema for `kpi.custom_threshold.entity_thresholds.threshold_levels`

Required:

- `severity_label` (String) Severity label assigned for this threshold level like info, warning, critical, etc
- `threshold_value` (Number) Value for the threshold field stats identifying this threshold level. 
				This is the key value that defines the levels for values derived from the KPI search metrics.

Optional:

- `dynamic_param` (Number) Value of the dynamic parameter for adaptive thresholds





<a id="nestedblock--service_depends_on"></a>
### Nested Schema for `service_depends_on`

Required:

- `kpis` (Set of String) A set of _key ids for each KPI in service identified by serviceid, which this service will depend on.
- `service` (String) _key value of service that this service depends on.

Optional:

- `overloaded_urgencies` (Map of Number) A map of urgency overriddes for the KPIs this service is depending on.

## Import

Import is supported using the following syntax:

```shell
terraform import itsi_service.example {{id}}
#OR
terraform import itsi_service.example {{title}}
```
